<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="libs/bootstrap-3.3.5-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="libs/bootstrap-3.3.5-dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="Styles/DashboardCss.css">
    <script src="JavaScript/jquery.min.js"></script>
    <script src="libs/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script src="JavaScript/JsFunc.js"></script>
    <title>百度新闻管理系统</title>
</head>
<body>
<div class="container-fluid">
    <header class="col-md-12">
        <h3>新闻数据管理系统</h3>
        <nav class="navbar navbar-inverse">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1" aria-expanded="false" onclick="onToggleBtnClick()">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="DashBoard.php">数据库</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="DashBoard.php">数据一览<span class="sr-only">(current)</span></a></li>
                    <li class="active"><a class="goto-add-news" href="#">发布新闻</a></li>

                </ul>
                <form class="navbar-form navbar-left" role="search">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search">
                    </div>
                    <button type="submit" class="btn btn-default">Submit</button>
                </form>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="#"></a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false" onclick="">设置
                            <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">用户设置</a></li>
                            <li><a href="#">数据库设置</a></li>
                            <li><a href="index.html">页面预览</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a onclick="quit()">退出</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>
    </header>

    <div class="main-content col-md-12 col-xs-12">
        <form action="./app/db_manipulate.php?action=add" method="post" class="form-add-news col-md-8 col-xs-12">
            <div class="form-group col-md-12 col-xs-12">
                <label for="news-title" class="col-md-2 col-xs-12">新闻标题：</label>
                <input type="text" id="news-title" name="news-title" required class="col-md-8 col-xs-12"
                       placeholder="请输入新闻标题...">
            </div>
            <div class="form-group col-md-12 col-xs-12">
                <label for="news-subject" class="col-md-2 col-xs-12">新闻门类：</label>
                <select id="news-subject" name="news-subject" class="col-md-2 col-xs-12" required>
                    <option value="">请选择</option>
                    <option value="科技">科技</option>
                    <option value="社会">社会</option>
                    <option value="娱乐">娱乐</option>
                    <option value="本地">本地</option>
                </select>

            </div>
            <div class="form-group col-md-12 col-xs-12">
                <label for="news-type" class="col-md-2 col-xs-12">新闻类型：</label>
                <select id="news-type" name="news-type" class="col-md-2 col-xs-12" required>
                    <option value="">请选择</option>
                    <option value="type-a">A类新闻</option>
                    <option value="type-b">B类新闻</option>
                    <option value="type-c">C类新闻</option>
                </select>

            </div>
            <div class="form-group col-md-12 unnecessary abstract col-xs-12">
                <label for="news-abstract" class="col-md-2 col-xs-12">新闻摘要：</label>
                <textarea id="news-abstract" name="news-abstract" class="col-md-8 col-xs-12" rows="4"></textarea>
            </div>

            <div class="form-group col-md-12 unnecessary img-1 col-xs-12">
                <label for="news-imgs-1" class="col-md-2 col-xs-12">新闻图片1：</label>
                <input type="text" id="news-imgs-1" name="news-imgs-1" class="col-md-6 col-xs-10" placeholder="粘贴图片链接">
                <input type="file" name="upload-img" id="upload-img-1" class=" col-md-4 col-xs-3">
                <div class="space col-md-2"></div>
                <input type="button" name="get-img1-preview" class="col-md-1 col-xs-3 btn btn-primary"
                       onclick="getImg1Preview()" value="预览">
                <img src="" alt="预览图片" id="img1-preview" class="col-md-4 col-xs-12">
            </div>

            <div class="form-group col-md-12 unnecessary img-2 col-xs-12">
                <label for="news-imgs-2" class="col-md-2 col-xs-12">新闻图片2：</label>
                <input type="text" id="news-imgs-2" name="news-imgs-2" class="col-md-6 col-xs-10" placeholder="粘贴图片链接">
                <input type="file" name="upload-img" id="upload-img-2"class=" col-md-4 col-xs-3">
                <div class="space col-md-2"></div>
                <input type="button" name="get-img2-preview" class="col-md-1 col-xs-3 btn btn-primary"
                       onclick="getImg2Preview()" value="预览">
                <img src="" alt="预览图片" id="img2-preview" class="col-md-4 col-xs-12">
            </div>
            <div class="form-group col-md-12 unnecessary img-3 col-xs-12">
                <label for="news-imgs-3" class="col-md-2 col-xs-12">新闻图片3：</label>
                <input type="text" id="news-imgs-3" name="news-imgs-3" class="col-md-6 col-xs-10" placeholder="粘贴图片链接">
                <input type="file" name="upload-img" id="upload-img-3"class=" col-md-4 col-xs-3">
                <div class="space col-md-2"></div>
                <input type="button" name="get-img3-preview" class="col-md-1 col-xs-3 btn btn-primary"
                       onclick="getImg3Preview()" value="预览">
                <img src="" alt="预览图片" id="img3-preview" class="col-md-4 col-xs-12">
            </div>

            <div class="col-md-12 unnecessary submit-form col-xs-12">
                <div class="space col-md-8 col-xs-6"></div>
                <div class="btn-group col-md-3 col-xs-6">
                    <input type="reset" value="清空" class="col-md-6 col-xs-6 btn btn-info">
                    <input type="submit" value="提交" class="col-md-6 col-xs-6 btn btn-success">
                </div>
            </div>

        </form>

    </div>


</div>
<footer>
    <p>版权声明®</p>
</footer>
<script>
    $(function () {
        //使用js在表单提交前进行完整性检查
        $("input[type='submit']").click(function (e) {
            if(!submitDataVerify()){
                //如果表单数据不完整则弹出警告框，然后组织默认事件
                alert("数据不完整，请您确认表单完整性！");
                e.preventDefault();
            }
        });


        $("input[type='file']").change(function (e) {
            uploadImgByAjax(e);
        });

        //监听新闻类型的变化
        $('#news-type').change(function () {
            var newsAbstract = $('.abstract');
            var img1 = $('.img-1');
            var img2 = $('.img-2');
            var img3 = $('.img-3');
            var btnSubmit = $('.submit-form');
            var optValue = $(this).val();
            //根据新闻类型，显示不同的表单，当表单类型切换时，同时将不用的表单清空
            switch (optValue) {
                case 'type-a':
                    newsAbstract.show();
                    img1.show();
                    img2.hide().find('#news-imgs-2').val('');
                    img3.hide().find('#news-imgs-3').val('');
                    btnSubmit.show();
                    break;
                case 'type-b':
                    newsAbstract.show();
                    img1.hide().find('#news-imgs-1').val('');
                    img2.hide().find('#news-imgs-2').val('');
                    img3.hide().find('#news-imgs-3').val('');
                    btnSubmit.show();
                    break;
                case 'type-c':
                    img1.show();
                    img2.show();
                    img3.show();
                    newsAbstract.hide().find('#news-abstract').val('');
                    btnSubmit.show();
                    break;
                default :
                    $('.unnecessary').hide();
                    break;
            }
        })
    })
</script>
</body>
</html>
